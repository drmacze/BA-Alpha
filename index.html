<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RPG Login System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0; padding: 0;
      font-family: 'SF Pro Display', sans-serif;
      background: linear-gradient(135deg, #1e1e2f, #252542);
      display: flex; justify-content: center; align-items: center;
      height: 100vh; overflow: hidden;
    }
    body::before {
      content: ''; position: fixed; inset: 0;
      background: radial-gradient(circle at center, rgba(128,0,255,0.2), transparent);
      animation: aura 5s ease-in-out infinite; z-index: -1;
    }
    @keyframes aura {
      0%,100% { transform: scale(1); opacity: 0.8; }
      50% { transform: scale(1.05); opacity: 1; }
    }
    .card {
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 40px;
      width: 350px;
      color: #fff;
      box-shadow: 0 0 30px rgba(255,255,255,0.05);
      position: relative;
    }
    .card::after {
      content: ''; position: absolute; bottom: 0; left: 0; height: 4px; width: 100%;
      background: linear-gradient(270deg, red, orange, yellow, green, blue, indigo, violet);
      background-size: 300% 300%;
      animation: rgbMove 8s linear infinite;
      border-radius: 0 0 20px 20px;
    }
    @keyframes rgbMove {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }
    h2 {
      text-align: center; margin-bottom: 20px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    input {
      width: 100%; padding: 12px 14px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 12px;
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: 15px;
    }
    input:focus {
      border-color: #7fffd4;
      outline: none;
    }
    .strength-meter {
      height: 5px; width: 100%;
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
      overflow: hidden; margin-top: 4px;
    }
    .strength-meter div {
      height: 100%; width: 0%;
      transition: width 0.3s;
    }
    .button {
      background: linear-gradient(to right, #00ffc3, #007cf0);
      color: #000;
      border: none;
      padding: 12px;
      border-radius: 12px;
      width: 100%;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .button:hover {
      transform: scale(1.02);
    }
    .toggle {
      margin-top: 10px;
      text-align: center;
      color: #aaa;
      cursor: pointer;
    }
    .toggle:hover { text-decoration: underline; }
    .notif {
      position: fixed;
      top: 20px; right: 20px;
      background: rgba(255,255,255,0.1);
      color: #fff;
      padding: 12px 16px;
      border-radius: 12px;
      animation: fadeIn 0.5s ease;
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
      z-index: 999;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .otp-card {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      display: flex; justify-content: center; align-items: center;
    }
    .otp-inner {
      background: rgba(255,255,255,0.06);
      backdrop-filter: blur(12px);
      padding: 30px;
      border-radius: 18px;
      width: 300px;
      text-align: center;
    }
    .slider-container {
      background: rgba(255,255,255,0.1);
      border-radius: 6px;
      height: 8px;
      position: relative;
      margin: 15px 0;
    }
    .slider-thumb {
      width: 24px; height: 24px;
      background: #7fffd4;
      border-radius: 50%;
      position: absolute;
      top: -8px; left: 0;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="card">
    <h2 id="formTitle">Login</h2>
    <div class="form-group"><input type="email" id="email" placeholder="Email *" /></div>
    <div class="form-group">
      <input type="password" id="password" placeholder="Password *" />
      <div class="strength-meter"><div id="strengthBar"></div></div>
    </div>
    <div class="slider-container">
      <div class="slider-thumb" id="slider"></div>
    </div>
    <button class="button" id="mainButton">Login</button>
    <div class="toggle" id="toggleLink">Belum punya akun? Daftar</div>
  </div>

  <!-- OTP Card -->
  <div class="otp-card" id="otpCard" style="display:none;">
    <div class="otp-inner">
      <h3>Verifikasi OTP</h3>
      <input type="text" id="otpInput" placeholder="Masukkan kode OTP" />
      <button class="button" id="verifyOTP">Verifikasi</button>
    </div>
  </div>

  <script>
    const emailInput = document.getElementById('email');
    const passInput = document.getElementById('password');
    const strengthBar = document.getElementById('strengthBar');
    const slider = document.getElementById('slider');
    const mainButton = document.getElementById('mainButton');
    const toggleLink = document.getElementById('toggleLink');
    const formTitle = document.getElementById('formTitle');
    let isLogin = true, dragging = false, captchaPass = false, otpCode = "";

    // Toast
    function showNotif(text) {
      const notif = document.createElement('div');
      notif.className = 'notif';
      notif.innerText = text;
      document.body.appendChild(notif);
      setTimeout(() => notif.remove(), 3500);
      navigator.vibrate?.(60);
    }

    // Strength
    passInput.addEventListener('input', () => {
      const v = passInput.value;
      let score = 0;
      if (v.length > 5) score++;
      if (/[A-Z]/.test(v)) score++;
      if (/[0-9]/.test(v)) score++;
      if (/\W/.test(v)) score++;
      strengthBar.style.width = (score * 25) + '%';
      strengthBar.style.background = score <= 1 ? 'red' : score <= 2 ? 'orange' : '#7fffd4';
    });

    // CAPTCHA
    slider.onmousedown = () => dragging = true;
    document.onmouseup = () => {
      if (dragging) {
        dragging = false;
        const pos = parseInt(slider.style.left || 0);
        if (pos >= 150) {
          slider.style.left = '170px';
          captchaPass = true;
          showNotif("CAPTCHA OK!");
        } else {
          slider.style.left = '0px';
          captchaPass = false;
        }
      }
    };
    document.onmousemove = e => {
      if (dragging) {
        const rect = slider.parentElement.getBoundingClientRect();
        let x = e.clientX - rect.left - 12;
        x = Math.max(0, Math.min(x, rect.width - 24));
        slider.style.left = x + 'px';
      }
    };

    // Toggle login/register
    toggleLink.onclick = () => {
      isLogin = !isLogin;
      formTitle.textContent = isLogin ? 'Login' : 'Register';
      mainButton.textContent = isLogin ? 'Login' : 'Register';
      toggleLink.textContent = isLogin ? 'Belum punya akun? Daftar' : 'Sudah punya akun? Login';
    };

    // Main action
    mainButton.onclick = () => {
      const email = emailInput.value.trim();
      const pass = passInput.value.trim();
      if (!email.includes('@') || pass.length < 4) return showNotif('Email dan password wajib diisi');
      if (!captchaPass) return showNotif('Geser CAPTCHA terlebih dahulu');

      if (isLogin) {
        // Simulasi login sukses â†’ kirim OTP
        otpCode = Math.floor(100000 + Math.random() * 900000).toString();
        document.getElementById('otpCard').style.display = 'flex';
        showNotif("Kode OTP: " + otpCode);
        new Audio('https://cdn.pixabay.com/download/audio/2022/03/15/audio_8b6c1e4bb7.mp3').play();
      } else {
        localStorage.setItem(email, pass);
        showNotif('Akun berhasil dibuat!');
      }
    };

    // OTP verify
    document.getElementById('verifyOTP').onclick = () => {
      const input = document.getElementById('otpInput').value.trim();
      if (input === otpCode) {
        showNotif('Login sukses!');
        document.getElementById('otpCard').style.display = 'none';
        new Audio('https://cdn.pixabay.com/download/audio/2022/03/09/audio_4ccf4f5361.mp3').play();
      } else {
        showNotif('Kode OTP salah!');
      }
    };
  </script>
</body>
</html>