<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bloodline: Ashaterra - Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
    body {
      background: linear-gradient(to bottom, #1a0d0d, #2b0000);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      color: #fff;
    }
    .container {
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(15px);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.2);
      width: 90%;
      max-width: 420px;
      animation: fadeIn 1s ease;
    }
    .container h2 {
      text-align: center;
      margin-bottom: 15px;
      color: gold;
    }
    input, select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      background: #1b1b1b;
      color: white;
      transition: 0.3s;
    }
    input:focus {
      outline: none;
      box-shadow: 0 0 10px gold;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 12px;
      background: linear-gradient(to right, gold, #cc8800);
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s ease;
    }
    button:hover {
      transform: scale(1.03);
      filter: brightness(1.2);
    }
    .toggle {
      margin-top: 10px;
      color: #bbb;
      text-align: center;
      cursor: pointer;
      font-size: 0.9em;
    }
    .toast {
      position: fixed;
      top: 15px;
      right: 15px;
      padding: 12px 18px;
      border-radius: 10px;
      color: white;
      backdrop-filter: blur(10px);
      opacity: 0;
      transition: 0.5s;
      z-index: 999;
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .toast.show { opacity: 1; }
    .toast.success { background: rgba(40, 167, 69, 0.8); }
    .toast.error { background: rgba(220, 53, 69, 0.8); }
    .footer {
      position: absolute;
      bottom: 12px;
      right: 15px;
      font-size: 0.8em;
      color: #ccc;
    }
    .rgb-line {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 4px;
      width: 100%;
      background: linear-gradient(90deg, red, gold, green, blue, violet);
      animation: rgbFlow 5s linear infinite;
    }
    @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    @keyframes rgbFlow { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(360deg); } }
    .captcha-box {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .captcha-code {
      font-weight: bold;
      background: #222;
      padding: 10px;
      border-radius: 6px;
      letter-spacing: 2px;
      user-select: none;
    }
    .refresh {
      background: none;
      border: none;
      color: gold;
      cursor: pointer;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

<div class="container">
  <h2 id="form-title">Login</h2>
  <input id="username" placeholder="Username" />
  <input id="email" type="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <input id="pin" type="number" placeholder="PIN 6-digit" />
  <input id="dob" type="date" />
  <select id="country">
    <option value="">Select Country</option>
    <option>Indonesia</option>
    <option>USA</option>
    <option>Japan</option>
  </select>
  <div class="captcha-box">
    <div class="captcha-code" id="captcha-code">AB12C</div>
    <button class="refresh" onclick="generateCaptcha()">⟳</button>
  </div>
  <input id="captcha" placeholder="Enter Captcha" />
  <button onclick="submitForm()">Login</button>
  <div class="toggle" onclick="toggleMode()">Don't have an account? Register</div>
</div>

<div class="toast" id="toast"></div>
<div class="footer" id="footer">ID: - | v3.0</div>
<div class="rgb-line"></div>

<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_23716337fc.mp3?filename=click-button-140881.mp3"></audio>
<audio id="errorSound" src="https://cdn.pixabay.com/download/audio/2021/09/14/audio_bf2813c455.mp3?filename=error-2-126514.mp3"></audio>
<audio id="successSound" src="https://cdn.pixabay.com/download/audio/2022/03/08/audio_48e1050da0.mp3?filename=success-1-6297.mp3"></audio>

<script>
  let isLogin = true;
  const toast = document.getElementById("toast");
  const footer = document.getElementById("footer");
  const captchaCode = document.getElementById("captcha-code");
  const clickSound = document.getElementById("clickSound");
  const errorSound = document.getElementById("errorSound");
  const successSound = document.getElementById("successSound");

  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const usernameInput = document.getElementById("username");
  const pinInput = document.getElementById("pin");
  const dobInput = document.getElementById("dob");
  const countryInput = document.getElementById("country");
  const captchaInput = document.getElementById("captcha");

  function generateCaptcha() {
    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
    let code = '';
    for (let i = 0; i < 5; i++) code += chars.charAt(Math.floor(Math.random() * chars.length));
    captchaCode.innerText = code;
  }

  generateCaptcha();

  function playClick() {
    clickSound.play();
    if (navigator.vibrate) navigator.vibrate([15]);
  }

  function showToast(message, type = 'error') {
    toast.innerText = (type === 'error' ? '❌ ' : '✅ ') + message;
    toast.className = 'toast show ' + type;
    if (type === 'success') successSound.play(); else errorSound.play();
    setTimeout(() => toast.classList.remove('show'), 3500);
  }

  function toggleMode() {
    isLogin = !isLogin;
    document.getElementById("form-title").innerText = isLogin ? "Login" : "Register";
    document.querySelector("button").innerText = isLogin ? "Login" : "Register";
    document.querySelector(".toggle").innerText = isLogin ? "Don't have an account? Register" : "Already have an account? Login";
    playClick();
    generateCaptcha();
  }

  function submitForm() {
    playClick();
    const email = emailInput.value.trim();
    const pass = passwordInput.value.trim();
    const uname = usernameInput.value.trim();
    const pin = pinInput.value.trim();
    const dob = dobInput.value;
    const country = countryInput.value;
    const captcha = captchaInput.value.trim();
    const realCaptcha = captchaCode.innerText.trim();

    if (!email || !pass || !uname || !pin || !dob || !country || !captcha) return showToast("Please fill all fields.");
    if (captcha !== realCaptcha) return showToast("Incorrect captcha.");

    const birthYear = new Date(dob).getFullYear();
    const age = new Date().getFullYear() - birthYear;
    if (!isLogin && age < 13) return showToast("Minimal usia 13 tahun.");

    if (!isLogin) {
      if (localStorage.getItem("user_" + email)) return showToast("Email sudah terdaftar.");
      const id = "ID-" + Math.floor(Math.random() * 999999);
      const user = { uname, pass, pin, dob, country, id };
      localStorage.setItem("user_" + email, JSON.stringify(user));
      footer.innerText = `ID: ${id} | v3.0`;
      showToast("Account created!", "success");
    } else {
      const user = JSON.parse(localStorage.getItem("user_" + email));
      if (!user || user.pass !== pass || user.pin !== pin) return showToast("Login gagal. Periksa ulang.");
      footer.innerText = `ID: ${user.id} | v3.0`;
      showToast("Welcome back, " + user.uname + "!", "success");
    }
  }
</script>

</body>
</html>